#!/bin/bash
echo "Starting backup proccess..."
docker-compose exec postgres sh -c "pg_dump -h 34.66.8.135 -U postgres -d dojot_auth -O -C > /tmp/dojot_auth.sql"
echo "Postgres: dojot_auth database dumped"
docker-compose exec postgres sh -c "pg_dump -h 34.66.8.135 -U postgres -d dojot_devm -O -C > /tmp/dojot_devm.sql"
echo "Postgres: dojot_devm database dumped"
docker-compose exec postgres sh -c "pg_dump -h 34.66.8.135 -U postgres -d dojot_imgm -O -C > /tmp/dojot_imgm.sql"
echo "Postgres: dojot_imgm database dumped"
docker-compose exec mongodb sh -c "mongodump --quiet --host=34.66.8.135 --port=27017 --out=/tmp/dumps"
echo "MongoDB: all database dumped"
echo "Backup proccess finished!"